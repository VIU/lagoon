I"o7<h1 id="faq">FAQ</h1>

<h2 id="how-do-i-contact-my-lagoon-administrator">How do I contact my Lagoon administrator?</h2>

<p>You should have either a private RocketChat or Slack channel that was set up for you to communicate - if not, or you‚Äôve forgotten how to contact us, reach out at <a href="mailto:support@amazee.io">support@amazee.io</a>.</p>

<h2 id="i-found-a-bug-">I found a bug! üêû</h2>

<p>If you‚Äôve found a bug or security issue, please send your findings to <a href="mailto:support@amazee.io">support@amazee.io</a>. Please <strong>DO NOT</strong> file a GitHub issue for them.</p>

<h2 id="im-interested-in-amazeeios-hosting-services-with-lagoon">I‚Äôm interested in amazee.io‚Äôs hosting services with Lagoon</h2>

<p>That‚Äôs great news! You can contact us via email at <a href="mailto:inquiries@amazee.io">inquiries@amazee.io</a>.</p>

<h2 id="how-can-i-restore-a-backup">How can I restore a backup?</h2>

<p>We have backups available for files and databases, typically taken every 24 hours at most. These backups are stored offsite.</p>

<p>We keep up to 7 daily backups and 4 weekly backups.</p>

<p>If you ever need to recover or restore a backup feel free to submit a ticket or send us a message via chat and we will be more than happy to help!</p>

<h2 id="how-can-i-download-a-database-dump">How can I download a database dump?</h2>

<iframe width="560" height="315" src="https://www.youtube.com/embed/bluTyxKqLbw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<h2 id="im-getting-an-invalid-ssl-certificate-error">I‚Äôm getting an invalid SSL certificate error</h2>

<p>The first thing to try is what is listed in <a href="../using-lagoon-the-basics/lagoon-yml.md#ssl-configuration-tls-acme">our documentation about SSL</a>.</p>

<p>If you follow those steps, and you are still seeing an error, please submit a ticket or send us a message on chat and we can help resolve this for you.</p>

<h2 id="im-getting-an-array-error-when-running-a-drush-command">I‚Äôm getting an ‚ÄúArray‚Äù error when running a drush command</h2>

<p>This was a bug that was prevalent in drush versions 8.1.16 and 8.1.17. There error would look something like this:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The command could not be executed successfully (returned: Array [error]
(
[default] =&gt; Array
(
[default] =&gt; Array
(
[driver] =&gt; mysql
[prefix] =&gt; Array
(
[default] =&gt;
)
, code: 0)
Error: no database record could be found for source @main [error]
</code></pre></div></div>

<p>Upgrading Drush should fix that for you. We strongly suggest that you use version 8.3 or newer. Once Drush is upgraded the command should work!</p>

<h2 id="im-seeing-an-internal-server-error-when-trying-to-access-my-kibana-logs">I‚Äôm seeing an Internal Server Error when trying to access my Kibana logs!</h2>

<iframe width="560" height="315" src="https://www.youtube.com/embed/BuQo5J0Qc2c" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p>No need to panic! This usually happens when a tenant has not been selected. To fix this, follow these steps:</p>

<ol>
  <li>Go to ‚ÄúTenants‚Äù on the left-hand menu of Kibana.</li>
  <li>Click on your tenant name.</li>
  <li>You‚Äôll see a pop-up window that says: ‚ÄúTenant Change‚Äù and the name of your tenant.</li>
  <li>Go back to the ‚ÄúDiscover‚Äù tab and attempt your query again.</li>
</ol>

<p>You should now be able to see your logs.</p>

<h2 id="im-unable-to-ssh-into-any-environment">I‚Äôm unable to SSH into any environment!</h2>

<p>I‚Äôm unable to SSH into any environment. I‚Äôm getting the following message: <code class="language-plaintext highlighter-rouge">Permission denied (publickey)</code>. When I run <code class="language-plaintext highlighter-rouge">drush sa</code> no aliases are returned.</p>

<p>This typically indicates an issue with Pygmy. You can find our troubleshooting docs for Pygmy here: <a href="https://docs.lagoon.sh/pygmy/troubleshooting">https://docs.lagoon.sh/pygmy/troubleshooting</a></p>

<h2 id="how-can-i-check-the-status-of-a-build">How can I check the status of a build</h2>

<iframe width="560" height="315" src="https://www.youtube.com/embed/PyrlZqTjf68" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<h2 id="how-do-i-add-a-cron-job">How do I add a cron job?</h2>

<iframe width="560" height="315" src="https://www.youtube.com/embed/Yd_JfDyfbR0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<h2 id="how-do-i-add-a-new-route">How do I add a new route?</h2>

<iframe width="560" height="315" src="https://www.youtube.com/embed/vQxh87F3fW4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<h2 id="how-do-i-remove-a-route">How do I remove a route?</h2>

<p>You will need to contact your helpful Lagoon administrator should you need to remove a route. You can use either the private RocketChat or Slack channel that was set up for you to communicate - if not, you can always reach us at support@amazee.io.</p>

<h2 id="when-i-run-pygmy-status-no-keys-are-loaded"><strong>When I run <code class="language-plaintext highlighter-rouge">pygmy status</code>, no keys are loaded:</strong></h2>

<p>You‚Äôll need to load your SSH key into pygmy. Here‚Äôs how: <a href="https://docs.lagoon.sh/pygmy/ssh-agent">https://docs.lagoon.sh/pygmy/ssh-agent</a></p>

<h2 id="when-i-run-drush-sa-no-aliases-are-returned"><strong>When I run <code class="language-plaintext highlighter-rouge">drush sa</code> no aliases are returned:</strong></h2>

<p>This typically indicates an issue with Pygmy. You can find our troubleshooting docs for Pygmy here: <a href="https://docs.lagoon.sh/pygmy/troubleshooting">https://docs.lagoon.sh/pygmy/troubleshooting</a></p>

<h2 id="my-deployments-fail-with-a-message-saying-drush-needs-a-more-functional-environment">My deployments fail with a message saying: ‚Äúdrush needs a more functional environment‚Äù</h2>

<p>This usually means that there is no database uploaded to the project. <a href="../drupal/first-deployment-of-drupal.md#5-synchronize-local-database-to-the-remote-lagoon-environment">Follow our step-by-step guide to add a database to your project</a>.</p>

<h2 id="when-i-start-pygmy-i-see-an-address-already-in-use-error">When I start pygmy I see an ‚Äúaddress already in use‚Äù error?</h2>

<p><code class="language-plaintext highlighter-rouge">Error starting userland proxy: listen tcp 0.0.0.0:80: bind: address already in use Error: failed to start containers: amazeeio-haproxy</code></p>

<p>This is a known error! Most of the time it means that there is already something running on port 80. You can find the culprit by running the following query:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>netstat -ltnp | grep -w ':80'
</code></pre></div></div>

<p>That should list everything running on port 80. Kill the process running on port 80. Once port 80 is freed up, pygmy should start up with no further errors.</p>

<h2 id="how-can-i-change-branchespr-environmentsproduction-on-my-project">How can I change branches/PR environments/production on my project?</h2>

<p>You can make that change using the Lagoon API! You can find the documentation for this change <a href="../administering-lagoon/graphql-queries.md#updating-objects">in our GraphQL documentation</a>.</p>

<h2 id="how-do-i-add-a-redirect">How do I add a redirect?</h2>

<iframe width="560" height="315" src="https://www.youtube.com/embed/rWb-PkRDhY4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<h2 id="how-can-i-add-new-users-and-ssh-keys-to-my-projectgroup">How can I add new users (and SSH keys) to my project/group?</h2>

<p>This can be done via the Lagoon API. You can find the steps documentation for this change <a href="../administering-lagoon/graphql-queries.md#allowing-access-to-the-project">in our GraphQL documentation</a>.</p>

<h2 id="can-an-environment-be-completely-deleted-to-roll-out-large-code-changes-to-my-project">Can an environment be completely deleted to roll out large code changes to my project?</h2>

<p>Environments are fully built from scratch at each deploy, dropping the old database and files and pushing your code would result in a fresh clean build, Don‚Äôt forget to re-sync!</p>

<p>It is possible to delete an environment via GraphQL. You can find the instructions <a href="../administering-lagoon/graphql-queries.md#deleting-environments">in our GraphQL documentation</a>.</p>

<h2 id="how-do-i-get-my-new-environment-variable-to-show-up">How do I get my new environment variable to show up?</h2>

<p>Once you‚Äôve added a runtime environment variable to your production environment via GraphQL, then all you need to do a deploy in order to get your change to show up on your environment.</p>

<h2 id="how-do-i-sftp-files-tofrom-my-lagoon-environment">How do I SFTP files to/from my Lagoon environment?</h2>

<p>For cloud hosting customers, you can SFTP to your Lagoon environment by using the following information:</p>

<ul>
  <li><strong>Server Hostname</strong>: <code class="language-plaintext highlighter-rouge">ssh.lagoon.amazeeio.cloud</code></li>
  <li><strong>Port</strong>: 32222</li>
  <li><strong>Username</strong>: &lt;Project-Environment-Name&gt;</li>
</ul>

<p>Your username is going to be the name of the environment you are connecting to, most commonly in the pattern <em><strong><code class="language-plaintext highlighter-rouge">PROJECTNAME-ENVIRONMENT</code></strong></em>.</p>

<p>You may also be interested in checking out our new Lagoon Sync tool, which you can read about here: <a href="https://github.com/amazeeio/lagoon-sync">https://github.com/amazeeio/lagoon-sync</a></p>

<p>Authentication also happens automatically via SSH Public &amp; Private Key Authentication.</p>

<h2 id="i-dont-want-to-use-lets-encrypt-i-have-an-ssl-certificate-i-would-like-to-install">I don‚Äôt want to use Let‚Äôs Encrypt. I have an SSL certificate I would like to install</h2>

<p>We can definitely help with that. Once you have your own SSL certificate, feel free to submit a ticket or send us a message via chat and we will be more than happy to help! You will need to send us the following files:</p>

<ul>
  <li>Certificate key (.key)</li>
  <li>Certificate file (.crt)</li>
  <li>Intermediate certificates (.crt)</li>
</ul>

<p>Also, you will need to <a href="../using-lagoon-the-basics/lagoon-yml.md#ssl-configuration-tls-acme">set the <code class="language-plaintext highlighter-rouge">tls-acme</code> option in <code class="language-plaintext highlighter-rouge">.lagoon.yml</code> to false</a>.</p>

<h2 id="is-it-possible-to-mount-an-external-volume-efsfusesmbetc-into-lagoon">Is it possible to mount an external volume (EFS/Fuse/SMB/etc) into Lagoon?</h2>

<p>Mounting an external volume would need to be handled completely inside of your containers, Lagoon does not provide a provision for this type of connection as part of the platform.</p>

<p>A developer can handle this by installing the necessary packages into the container (via the <a href="https://docs.docker.com/engine/reference/builder/">Dockerfile</a>), and ensuring the volume mount is connected via a <a href="../using-lagoon-the-basics/lagoon-yml.md#tasks">pre- or post-rollout task</a>.</p>

<h2 id="is-there-a-way-to-stop-a-lagoon-build">Is there a way to stop a Lagoon build?</h2>

<p>If you have a build that has been running for a long time, and want to stop it, you will need to reach out to support. Currently, builds can only be stopped by amazee.io support.</p>

<h2 id="im-launching-my-production-environment-in-chusau-to-which-records-should-i-point-my-dns">I‚Äôm launching my production environment in (CH\US\AU), to which records should I point my DNS?</h2>

<p>For amazee.io cloud customers:</p>

<ul>
  <li>US
    <ul>
      <li><a href="http://lagoon.us.amazee.io/">lagoon.us.amazee.io</a></li>
      <li>34.237.122.21</li>
    </ul>
  </li>
  <li>CH
    <ul>
      <li><a href="http://lagoon.ch.amazee.io/">lagoon.ch.amazee.io</a></li>
      <li>5.102.151.21</li>
      <li>5.102.151.53</li>
    </ul>
  </li>
  <li>AU
    <ul>
      <li><a href="http://lagoon.au.amazee.io/">lagoon.au.amazee.io</a></li>
      <li>13.55.153.74</li>
    </ul>
  </li>
</ul>

<h2 id="we-installed-the-elasticsearchsolr-service-on-our-website-how-can-we-get-access-to-the-ui-port-92008983-from-a-browser">We installed the Elasticsearch\Solr service on our website. How can we get access to the UI (port 9200/8983) from a browser?</h2>

<p>We suggest only exposing web services (NGINX/Varnish/Node.js) in your deployed environments. Locally, you can get the ports mapped for these services by checking <code class="language-plaintext highlighter-rouge">docker-compose ps</code>, and then load <a href="http://localhost/"><code class="language-plaintext highlighter-rouge">http://localhost</code></a><code class="language-plaintext highlighter-rouge">:&lt;port&gt;</code> in your browser.</p>

<h2 id="where-can-i-find-the-amazeeio-status-page">Where can I find the amazee.io Status Page?</h2>

<p>You can find and subscribe to the amazee.io StatusPage here: <a href="https://status.amazee.io/">https://status.amazee.io/</a>.</p>

<h2 id="i-have-a-question-that-isnt-answered-here">I have a question that isn‚Äôt answered here.</h2>

<p>You can reach out to us via <a href="https://amazeeio.rocket.chat/home">RocketChat</a> or email at <a href="mailto:support@amazee.io">support@amazee.io</a>.</p>
:ET